<!-- extend base.html -->
{% extends 'base.html' %}

{% block title %}
BCA | Resource
{% endblock %}

{% block body %}
<div class="container py-3">
  {% if resources %}
  <div class="d-flex justify-content-center">
    <table>
      <tr>
        <td><input type="text" placeholder="Search for resource..." name="key" id="key"></td>
        <td class="">
          <input type="button" class="mx-2 filter-btn" id="filter" onclick="resource_filter()" value="Search">
        </td>
      </tr>
    </table>
  </div>

  {% for resource in resources %}
  <div class="bg-light rounded my-4 shadow">
    <div class="row align-items-center p-3">
      <div class="col-md-10">
        <p class="text-clamp-2">
          {{resource.title}}
        </p>
        <span class="text-muted"><i class="bi bi-calendar-event mx-3"></i>
          {{resource.date|date:"d M Y"}}</span>
        </span>
        {% if resource.file %}
        <a href="{{resource.file.url}}" downlaod class="text-decoration-none text-dark mx-5"><i
            class="bi bi-download mx-3"></i></a>
        {% endif %}
      </div>
      <div class="col-md-2">
        {% if resource.file %}
        <a href="{{resource.file.url}}" target="_blank" class="text-decoration-none btn btn-outline-dark">
          <span class="">View</span>
        </a>
        {% endif %}
      </div>
    </div>
  </div>
  {% endfor %}
  {% else %}
  <p class="text-center text-danger">
    No Resource Found
  </p>
  {% endif %}
</div>

<script>
  resource_filter = () => {
    let key = $("#key").val();
    window.location.href = "{% url 'resource_filter' key=1234 %}".replace(/1234/, key.toString());
  }
</script>

{% endblock %}